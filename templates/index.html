<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Hub - Discussion Blog</title>
    <link rel="stylesheet" href="/static/styles.css">
  </head>
  <body>
    <div class="container">
      <!-- Main site header -->
      <header class="header">
        <div class="corner-ornament corner-top-left"></div>
        <div class="corner-ornament corner-top-right"></div>
        <div class="corner-ornament corner-bottom-left"></div>
        <div class="corner-ornament corner-bottom-right"></div>

        <div class="header-content">
          <div class="logo">
            <div class="logo-icon">ðŸ”—</div>
            <h1 class="site-title">The Hub</h1>
          </div>

          <nav class="nav">
            <a href="/login.html" class="btn btn-outline">Login</a>
            <a href="/register.html" class="btn btn-primary">Register</a>
          </nav>
        </div>
      </header>

      <!-- Hero banner section -->
      <section class="hero">
        <div class="hero-content">
          <h2 class="hero-title">
            The Hub <br>
            <span class="hero-subtitle">Conversations that matter</span>
          </h2>

          <p class="hero-description">
            Share your thoughts, ask questions, and join discussions on anything
            that inspires you.
          </p>

          <div class="hero-buttons">
            <a href="/login.html" class="btn btn-primary btn-large">Explore</a>
          </div>
        </div>
      </section>

      <!-- Recent posts section -->
      <section class="recent-section">
        <div class="section-content">
          <div class="section-header">
            <h2 class="section-title">Latest Discussions</h2>
            <p class="section-description">
              Catch up on trending conversations and share your own ideas.
            </p>
          </div>

          <div class="blog-grid" id="latest-posts">
            <!-- Posts will be loaded dynamically -->
            <p style="text-align: center; color: #666">
              Loading latest discussions...
            </p>
          </div>
        </div>
      </section>

      <div class="footer-bottom">
        <p class="copyright">Â© 2025 The Hub</p>
      </div>
    </div>

    <script src="/static/app.js"></script>
    <script>
      // Load homepage posts
      async function loadLatestPosts() {
        const data = await getPosts(1);
        const container = document.getElementById("latest-posts");

        if (data.posts.length === 0) {
          container.innerHTML =
            '<p style="text-align: center; color: #666;">No discussions yet. Be the first to start one!</p>';
          return;
        }

        container.innerHTML = data.posts
          .slice(0, 3)
          .map(
            (post) => `
          <div class="blog-card">
            <div class="blog-header">
              <div class="blog-info">
                <h3>${post.title}</h3>
                <p class="blog-author">by ${post.author}</p>
                <p class="blog-date">${post.created_at}</p>
              </div>
              <div class="blog-likes">
                <span class="heart">ðŸ§¡</span>
                <span class="like-count">${post.like_count}</span>
              </div>
            </div>

            <div class="blog-excerpt">
              "${post.content.substring(0, 100)}${
              post.content.length > 100 ? "..." : ""
            }"
            </div>

            <div class="blog-tags">
              ${post.tags
                .map((tag) => `<span class="tag">${tag}</span>`)
                .join("")}
            </div>

            <a href="/login.html" class="read-more">Join the Discussion â†’</a>
          </div>
        `
          )
          .join("");
      }

      loadLatestPosts();
    </script>
  </body>
</html>
